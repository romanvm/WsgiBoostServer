sudo: required

services:
  - docker

before_install:
  - docker pull ubuntu
  - docker run -d --name ubuntu-test -v $(pwd):/travis ubuntu tail -f /dev/null
  - docker ps -a

install:
  - docker exec ubuntu-test bash -c "apt-get update;
    apt-get install -y software-properties-common python-software-properties;
    add-apt-repository ppa:fkrull/deadsnakes;
    apt-get update;
    apt-get install -y build-essential python3-pip python3.6 python3.6-dev zlib1g-dev libbz2-dev libboost-all-dev libssl-dev;
    python3.6 -m pip install setuptools"

script:
  - docker exec ubuntu-test bash -c "cd /travis;
    python3.6 setup.py build test"

notifications:
    email: false
