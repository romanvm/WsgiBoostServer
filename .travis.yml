sudo: required

services:
  - docker

before_install:
  - docker pull ubuntu
  - docker run -d --name ubuntu-test -v $(pwd):/travis ubuntu tail -f /dev/null
  - docker ps -a

install:
  - docker exec ubuntu-test bash -c "apt-get update;
    apt-get install -y software-properties-common python-software-properties;
    add-apt-repository ppa:fkrull/deadsnakes;
    apt-get update;
    apt-get install -y git build-essential gcc-4.9 python3.6 python3.6-dev zlib1g-dev libbz2-dev libboost-all-dev libssl-dev;
    cd /travis;
    git clone https://github.com/romanvm/WsgiBoostServer.git"

script:
  - docker exec ubuntu-test bash -c "cd /travis/WsgiBoostServer;
    export CC=g++-4.9;
    export CXX=g++-4.9;
    python3.6 setup.py build test"

notifications:
    email: false
